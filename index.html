<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Gallery Analyzer</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <!-- 3D viewer: model-viewer (local) -->
    <script>
      // Configure decoder locations to use local aliases at site root
      window.ModelViewerElement = window.ModelViewerElement || {};
      // Meshopt expects the non-module UMD decoder JS URL
      window.ModelViewerElement.meshoptDecoderLocation = '/meshopt_decoder.js';
      // Draco expects a directory; it will request draco_decoder.js / .wasm under this path
      window.ModelViewerElement.dracoDecoderLocation = '/';
      // If you use KTX2/Basis textures, uncomment the next line and vendor the transcoder
      // window.ModelViewerElement.ktx2TranscoderLocation = '/';
    </script>
    <script type="module" src="/assets/js/vendor/model-viewer.min.js"></script>
</head>
<body>

    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title">Media Gallery Analyzer</div>
            <div class="sidebar-subtitle" id="fileCount">Loading...</div>
        </div>

        <!-- æ¤œç´¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="search-section">
            <input type="text" class="search-input" id="searchInput" placeholder="ç”»åƒã‚’æ¤œç´¢...">
            <div class="search-options">
                <div class="search-options-row">
                    <label class="search-option">
                        <input type="radio" name="searchType" value="fulltext" checked>
                        å…¨æ–‡æ¤œç´¢
                    </label>
                    <label class="search-option">
                        <input type="radio" name="searchType" value="semantic">
                        ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢
                    </label>
                </div>
                <div class="search-options-row">
                    <label class="search-option">
                        <input type="radio" name="searchType" value="filename">
                        ãƒ•ã‚¡ã‚¤ãƒ«åæ¤œç´¢
                    </label>

                </div>
            </div>
        </div>

        <!-- ãƒ•ã‚©ãƒ«ãƒ€ãƒ„ãƒªãƒ¼ -->
        <div class="folder-tree" id="folderTree">
            <div class="loading">ã‚¹ã‚­ãƒ£ãƒ³ä¸­...</div>
        </div>

        <!-- ã‚¿ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="sidebar-tags">
            <div class="tags-title">Quick Filters</div>
            <div class="tag-list">
                <span class="tag active" data-type="all">All</span>
                <span class="tag" data-type="image">Images</span>
                <span class="tag" data-type="video">Videos</span>
                <span class="tag" data-type="audio">Audio</span>
                <span class="tag" data-type="model">3D</span>
            </div>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="main-content">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ãƒãƒ¼ -->
        <div class="header-bar">
            <!-- <input type="text" class="search-bar" placeholder="Search files..." id="searchInput"> -->
            <div class="view-options">
                <button class="view-btn active" data-view="grid">ğŸ“± Grid</button>
                <button class="view-btn" data-view="list">ğŸ“‹ List</button>
                <button class="view-btn" id="refreshBtn">ğŸ”„ Refresh</button>
                <button class="view-btn" id="analyzeAllBtn">âš¡ ç”»åƒå…¨è§£æ</button>
                <button class="view-btn" id="analyzeAllVideosBtn">ğŸ¬ å‹•ç”»å…¨è§£æ</button>
            </div>
        </div>

        <!-- ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚³ãƒ³ãƒ†ãƒŠ -->
        <div class="gallery-container">
            <div class="media-grid" id="mediaGrid">
                <div class="loading">ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
            </div>
        </div>

        <!-- çµ±è¨ˆãƒãƒ¼ -->
        <div class="stats-bar">
            <span class="stats-info" id="statsInfo">Loading...</span>
            <span style="margin-left: auto;" id="totalSize">Total: Calculating...</span>
        </div>
    </div>

    <!-- ãƒ©ã‚¤ãƒˆãƒœãƒƒã‚¯ã‚¹ -->
    <div class="lightbox" id="lightbox">
        <span class="close-btn" id="lightboxCloseBtn">&times;</span>
        <div class="lightbox-content" id="lightboxContent"></div>
    </div>

    <!-- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" id="ctxCopy">
            <span>ğŸ“‹</span> ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼
        </div>
        <div class="context-menu-item" id="ctxOpenFile">
            <span>ğŸ“‚</span> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
        </div>
        <div class="context-menu-item" id="ctxOpenFolder">
            <span>ğŸ“</span> ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã
        </div>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal-overlay" id="analysisModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ç”»åƒè§£æçµæœ</h3>
                <button class="modal-close" id="analysisModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <label class="modal-label">ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³</label>
                    <div class="modal-value" id="modalCaption"></div>
                </div>
                <div class="modal-section">
                    <label class="modal-label">ã‚¿ã‚°</label>
                    <div id="modalTags" class="modal-tags"></div>
                </div>
                <div class="modal-section">
                    <label class="modal-label">ãƒ¢ãƒ‡ãƒ«</label>
                    <div class="modal-value" id="modalModel"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts (ESM entry) -->
    <script type="module" src="/assets/js/app.js"></script>
</body>
</html>
